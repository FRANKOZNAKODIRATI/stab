<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Stake Mines Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: #eee;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    h1 {
      margin-bottom: 10px;
    }
    .controls {
      margin-bottom: 15px;
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      justify-content: center;
    }
    label {
      font-size: 14px;
    }
    input, select {
      padding: 5px;
      border-radius: 5px;
      border: none;
      margin-left: 5px;
    }
    #game {
      display: grid;
      grid-template-columns: repeat(5, 60px);
      grid-template-rows: repeat(5, 60px);
      gap: 8px;
      margin-bottom: 20px;
    }
    .tile {
      width: 60px;
      height: 60px;
      background: #333;
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 30px;
      user-select: none;
      transition: background 0.3s;
    }
    .tile.revealed {
      background: #444;
      cursor: default;
    }
    .tile.diamond {
      color: #00ffcc;
    }
    .tile.mine {
      color: red;
    }
    #status {
      margin-bottom: 10px;
    }
    #restartBtn {
      padding: 10px 20px;
      background: #00bfa5;
      border: none;
      border-radius: 6px;
      color: #121212;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }
    #restartBtn:hover {
      background: #00e0c1;
    }
  </style>
</head>
<body>

<h1>Stake Mines Game</h1>

<div class="controls">
  <label>
    Bet: $
    <input type="number" id="betAmount" min="0.1" step="0.1" value="1" />
  </label>
  <label>
    Mines:
    <select id="mineCount">
      <!-- 1 to 24 options -->
    </select>
  </label>
  <button id="restartBtn">Start Game</button>
</div>

<div id="status">Click "Start Game" to play!</div>
<div id="game"></div>

<script>
  const rows = 5;
  const cols = 5;
  const totalTiles = rows * cols;

  const gameEl = document.getElementById('game');
  const statusEl = document.getElementById('status');
  const restartBtn = document.getElementById('restartBtn');
  const mineCountSelect = document.getElementById('mineCount');
  const betInput = document.getElementById('betAmount');

  let mines = new Set();
  let revealedTiles = 0;
  let gameOver = false;
  let diamondsToFind = 0;

  // Populate mine selector
  for (let i = 1; i <= 24; i++) {
    const option = document.createElement('option');
    option.value = i;
    option.textContent = i;
    mineCountSelect.appendChild(option);
  }

  function placeMines(count) {
    mines.clear();
    while (mines.size < count) {
      const rand = Math.floor(Math.random() * totalTiles);
      mines.add(rand);
    }
  }

  function updateStatus(msg) {
    statusEl.textContent = msg;
  }

  function revealTile(tile, index) {
    if (tile.classList.contains('revealed') || gameOver) return;

    tile.classList.add('revealed');

    if (mines.has(index)) {
      tile.textContent = 'ðŸ’£';
      tile.classList.add('mine');
      revealAll();
      updateStatus(`ðŸ’¥ Game Over! You lost $${betInput.value}`);
      gameOver = true;
    } else {
      tile.textContent = 'ðŸ’Ž';
      tile.classList.add('diamond');
      revealedTiles++;
      if (revealedTiles === diamondsToFind) {
        updateStatus(`ðŸŽ‰ You found all diamonds! You win $${betInput.value * 2}`);
        revealAll();
        gameOver = true;
      } else {
        updateStatus(`Diamonds found: ${revealedTiles} / ${diamondsToFind}`);
      }
    }
  }

  function revealAll() {
    for (let i = 0; i < totalTiles; i++) {
      const tile = gameEl.children[i];
      if (!tile.classList.contains('revealed')) {
        if (mines.has(i)) {
          tile.textContent = 'ðŸ’£';
          tile.classList.add('revealed', 'mine');
        } else {
          tile.textContent = 'ðŸ’Ž';
          tile.classList.add('revealed', 'diamond');
        }
      }
    }
  }

  function startGame() {
    const mineCount = parseInt(mineCountSelect.value);
    const bet = parseFloat(betInput.value);

    if (isNaN(bet) || bet <= 0) {
      alert('Please enter a valid bet amount.');
      return;
    }

    revealedTiles = 0;
    gameOver = false;
    diamondsToFind = totalTiles - mineCount;

    gameEl.innerHTML = '';
    placeMines(mineCount);

    for (let i = 0; i < totalTiles; i++) {
      const tile = document.createElement('div');
      tile.classList.add('tile');
      tile.dataset.index = i;
      tile.addEventListener('click', () => revealTile(tile, i));
      gameEl.appendChild(tile);
    }

    updateStatus(`Diamonds found: 0 / ${diamondsToFind}`);
  }

  restartBtn.addEventListener('click', startGame);

// Auto-select 1 mine on first load
mineCountSelect.value = 1;
</script>

</body>
</html>
